# NimsforestOrganization - Organizational Structure Component
# Run these commands from the tools/nimsforestorganization directory

.PHONY: nimsforestorganization-hello nimsforestorganization-init nimsforestorganization-lint nimsforestorganization-addtomainmake nimsforestorganization-create-folder-structure

nimsforestorganization-hello:
	@echo "=== NimsforestOrganization System Check ==="
	@echo "Checking system compatibility..."
	@command -v git >/dev/null 2>&1 || { echo "Error: git is required but not installed." >&2; exit 1; }
	@command -v make >/dev/null 2>&1 || { echo "Error: make is required but not installed." >&2; exit 1; }
	@echo "✓ Git available"
	@echo "✓ Make available"
	@echo ""
	@echo "Creates organizational documentation structure:"
	@echo "  • Customer value chain (marketing, sales, operations, accounting)"
	@echo "  • Strategic direction and financing (strategy, finance, governance, legal)"
	@echo "  • Three-level hierarchy for systematic intelligence capture"
	@echo ""
	@echo "Next: Run 'make nimsforestorganization-init' to create structure"

nimsforestorganization-init:
	@echo "=== NimsforestOrganization Initialization ==="
	@echo "Creating organizational structure from YAML..."
	@$(MAKE) -f $(firstword $(MAKEFILE_LIST)) nimsforestorganization-create-folder-structure

nimsforestorganization-lint:
	@echo "=== NimsforestOrganization Structure Validation ==="
	@echo "Checking organizational structure..."
	@echo ""
	@if [ -d "$${DOCS_PATH:-../../docs}/organization" ]; then \
		echo "✓ Organization directory exists"; \
		folder_count=$$(find $${DOCS_PATH:-../../docs}/organization -type d | wc -l); \
		echo "📁 Total folders: $$folder_count"; \
		echo ""; \
		echo "Validating expected structure:"; \
		failed=0; \
		for path in \
			"customer-value-chain/marketing/target-audiences" \
			"customer-value-chain/marketing/messaging" \
			"customer-value-chain/marketing/channels" \
			"customer-value-chain/marketing/campaigns" \
			"customer-value-chain/sales/pipeline" \
			"customer-value-chain/sales/qualification" \
			"customer-value-chain/sales/territories" \
			"customer-value-chain/sales/processes" \
			"customer-value-chain/operations/processes" \
			"customer-value-chain/operations/quality" \
			"customer-value-chain/operations/supply-chain" \
			"customer-value-chain/operations/delivery" \
			"customer-value-chain/accounting/reporting" \
			"customer-value-chain/accounting/analysis" \
			"customer-value-chain/accounting/compliance" \
			"customer-value-chain/accounting/budgeting" \
			"strategic-direction-and-financing/strategy/planning" \
			"strategic-direction-and-financing/strategy/objectives" \
			"strategic-direction-and-financing/strategy/analysis" \
			"strategic-direction-and-financing/strategy/roadmaps" \
			"strategic-direction-and-financing/finance/budgeting" \
			"strategic-direction-and-financing/finance/forecasting" \
			"strategic-direction-and-financing/finance/investments" \
			"strategic-direction-and-financing/finance/reporting" \
			"strategic-direction-and-financing/governance/policies" \
			"strategic-direction-and-financing/governance/procedures" \
			"strategic-direction-and-financing/governance/risk-management" \
			"strategic-direction-and-financing/governance/compliance" \
			"strategic-direction-and-financing/legal/contracts" \
			"strategic-direction-and-financing/legal/intellectual-property" \
			"strategic-direction-and-financing/legal/regulatory" \
			"strategic-direction-and-financing/legal/disputes"; do \
			full_path="$${DOCS_PATH:-../../docs}/organization/$$path"; \
			if [ -d "$$full_path" ]; then \
				echo "  ✓ $$path"; \
			else \
				echo "  ✗ $$path missing"; \
				failed=1; \
			fi; \
		done; \
		if [ $$failed -eq 1 ]; then \
			echo ""; \
			echo "❌ Structure validation failed"; \
			exit 1; \
		else \
			echo ""; \
			echo "✅ All expected directories exist"; \
		fi; \
	else \
		echo "✗ Organization structure not found. Run 'make nimsforestorganization-init' first."; \
	fi

nimsforestorganization-addtomainmake:
	@echo "=== Adding NimsforestOrganization to main Makefile ==="
	@if [ ! -f Makefile ]; then \
		echo "Creating main Makefile..."; \
		echo "-include MAKEFILE.nimsforestorganization" > Makefile; \
	else \
		if ! grep -q "MAKEFILE.nimsforestorganization" Makefile; then \
			echo "Adding include to existing Makefile..."; \
			echo "-include MAKEFILE.nimsforestorganization" >> Makefile; \
		else \
			echo "✓ Already included in Makefile"; \
		fi; \
	fi
	@echo "✓ NimsforestOrganization targets available via main Makefile"

nimsforestorganization-create-folder-structure:
	@echo "Creating organizational directory structure..."
	@mkdir -p $${DOCS_PATH:-../../docs}/organization
	@echo "# Organization" > $${DOCS_PATH:-../../docs}/organization/README.md
	@echo "" >> $${DOCS_PATH:-../../docs}/organization/README.md
	@echo "Organizational documentation structure" >> $${DOCS_PATH:-../../docs}/organization/README.md
	@echo "" >> $${DOCS_PATH:-../../docs}/organization/README.md
	@echo "## Structure" >> $${DOCS_PATH:-../../docs}/organization/README.md
	@echo "" >> $${DOCS_PATH:-../../docs}/organization/README.md
	@echo "Creating customer value chain structure..."
	@mkdir -p $${DOCS_PATH:-../../docs}/organization/customer-value-chain/marketing/target-audiences
	@mkdir -p $${DOCS_PATH:-../../docs}/organization/customer-value-chain/marketing/messaging
	@mkdir -p $${DOCS_PATH:-../../docs}/organization/customer-value-chain/marketing/channels
	@mkdir -p $${DOCS_PATH:-../../docs}/organization/customer-value-chain/marketing/campaigns
	@mkdir -p $${DOCS_PATH:-../../docs}/organization/customer-value-chain/sales/pipeline
	@mkdir -p $${DOCS_PATH:-../../docs}/organization/customer-value-chain/sales/qualification
	@mkdir -p $${DOCS_PATH:-../../docs}/organization/customer-value-chain/sales/territories
	@mkdir -p $${DOCS_PATH:-../../docs}/organization/customer-value-chain/sales/processes
	@mkdir -p $${DOCS_PATH:-../../docs}/organization/customer-value-chain/operations/processes
	@mkdir -p $${DOCS_PATH:-../../docs}/organization/customer-value-chain/operations/quality
	@mkdir -p $${DOCS_PATH:-../../docs}/organization/customer-value-chain/operations/supply-chain
	@mkdir -p $${DOCS_PATH:-../../docs}/organization/customer-value-chain/operations/delivery
	@mkdir -p $${DOCS_PATH:-../../docs}/organization/customer-value-chain/accounting/reporting
	@mkdir -p $${DOCS_PATH:-../../docs}/organization/customer-value-chain/accounting/analysis
	@mkdir -p $${DOCS_PATH:-../../docs}/organization/customer-value-chain/accounting/compliance
	@mkdir -p $${DOCS_PATH:-../../docs}/organization/customer-value-chain/accounting/budgeting
	@echo "Creating strategic direction and financing structure..."
	@mkdir -p $${DOCS_PATH:-../../docs}/organization/strategic-direction-and-financing/strategy/planning
	@mkdir -p $${DOCS_PATH:-../../docs}/organization/strategic-direction-and-financing/strategy/objectives
	@mkdir -p $${DOCS_PATH:-../../docs}/organization/strategic-direction-and-financing/strategy/analysis
	@mkdir -p $${DOCS_PATH:-../../docs}/organization/strategic-direction-and-financing/strategy/roadmaps
	@mkdir -p $${DOCS_PATH:-../../docs}/organization/strategic-direction-and-financing/finance/budgeting
	@mkdir -p $${DOCS_PATH:-../../docs}/organization/strategic-direction-and-financing/finance/forecasting
	@mkdir -p $${DOCS_PATH:-../../docs}/organization/strategic-direction-and-financing/finance/investments
	@mkdir -p $${DOCS_PATH:-../../docs}/organization/strategic-direction-and-financing/finance/reporting
	@mkdir -p $${DOCS_PATH:-../../docs}/organization/strategic-direction-and-financing/governance/policies
	@mkdir -p $${DOCS_PATH:-../../docs}/organization/strategic-direction-and-financing/governance/procedures
	@mkdir -p $${DOCS_PATH:-../../docs}/organization/strategic-direction-and-financing/governance/risk-management
	@mkdir -p $${DOCS_PATH:-../../docs}/organization/strategic-direction-and-financing/governance/compliance
	@mkdir -p $${DOCS_PATH:-../../docs}/organization/strategic-direction-and-financing/legal/contracts
	@mkdir -p $${DOCS_PATH:-../../docs}/organization/strategic-direction-and-financing/legal/intellectual-property
	@mkdir -p $${DOCS_PATH:-../../docs}/organization/strategic-direction-and-financing/legal/regulatory
	@mkdir -p $${DOCS_PATH:-../../docs}/organization/strategic-direction-and-financing/legal/disputes
	@echo "- **customer-value-chain/** - Core value delivery functions" >> $${DOCS_PATH:-../../docs}/organization/README.md
	@echo "- **strategic-direction-and-financing/** - Strategic planning and financial management" >> $${DOCS_PATH:-../../docs}/organization/README.md
	@echo "✓ Organizational structure created"

